# 辦公室助理機器人 — 感測器與電源系統研究報告

> 日期：2026-02-12
> 目標：辦公室室內導航、承載 Mac Mini M4 + Reachy Mini Lite + 底盤、運行 4+ 小時

---

## Part 1：感測器系統

### 1.1 LiDAR（2D 雷射測距）

用於 SLAM 建圖與即時避障，是室內導航的核心感測器。

| 規格 | RPLIDAR A1 (M8) | RPLIDAR C1 | RPLIDAR A2 (M12) | YDLIDAR X4 | YDLIDAR G4 |
|------|----------------|------------|-------------------|------------|------------|
| **技術原理** | 三角測距 | DTOF 飛行時間 | 三角測距 | 三角測距 | 三角測距 |
| **測距範圍** | 0.15 - 12m | 0.05 - 12m | 0.15 - 16m | 0.12 - 10m | 0.12 - 16m |
| **取樣頻率** | 8,000 次/秒 | 5,000 次/秒 | 8,000 次/秒 | 5,000 次/秒 | 9,000 次/秒 |
| **掃描頻率** | 5.5 Hz（最高 10 Hz） | 8-12 Hz（典型 10 Hz） | 10 Hz（最高 15 Hz） | 6-12 Hz | 5-12 Hz |
| **角度解析度** | ~1° | 0.72° | ~0.45° | ~0.72° | ~0.28° |
| **測距精度** | ±1% | ±30mm | ±1% | ±2% | ±1% |
| **介面** | UART/TTL | UART/TTL | UART/TTL | UART/TTL | UART/TTL |
| **供電** | 5V | 5V (1.15W) | 5V | 5V | 5V |
| **防護等級** | 無 | IP54 | 無 | 無 | 無 |
| **價格（USD）** | ~$99 | ~$59-69 | ~$229 | ~$60-80 | ~$100-120 |

**推薦選擇：**
- **入門版：RPLIDAR C1**（$59-69）— 性價比極高，DTOF 技術抗環境光干擾更強，IP54 防護，盲區僅 5cm，非常適合室內環境
- **進階版：RPLIDAR A2**（$229）— 16m 測距、更高取樣率，無刷馬達更安靜

### 1.2 超音波感測器

用於近距離補盲（LiDAR 盲區）和低矮障礙物偵測。

| 規格 | HC-SR04 | US-100 | MaxBotix MB1240 |
|------|---------|--------|-----------------|
| **測距範圍** | 2 - 400cm | 2 - 450cm | 20 - 765cm |
| **精度** | ±3mm | ±3mm | ±1cm |
| **波束角** | ~15°（錐形） | ~15° | ~窄波束（最窄） |
| **介面** | GPIO Trigger/Echo | UART 或 GPIO | 類比/UART/I2C/PWM |
| **供電** | 5V | 3.3V-5V | 3.3-5V |
| **抗雜訊** | 低 | 中 | 高（自動校準） |
| **價格（USD）** | ~$1-2 | ~$3-5 | ~$30-40 |

**建議安裝數量與位置（共 4-6 個）：**
- **前方**：2 個（左前 45°、右前 45°）— 偵測前方近距離障礙
- **側面**：2 個（左右各 1 個）— 走廊跟隨、牆壁距離
- **後方**：1-2 個 — 倒車避障

**推薦：**
- **入門版：HC-SR04 x 4**（~$8 總計）— 便宜可用，夠用
- **進階版：MaxBotix MB1240 x 4 + HC-SR04 x 2**（~$140 總計）— 前方和側面用 MaxBotix 提高可靠度

### 1.3 IMU（慣性測量單元）

用於輪式里程計融合、姿態偵測、加速度補償。

| 規格 | MPU6050 | BNO055 | ICM-20948 |
|------|---------|--------|-----------|
| **軸數** | 6 軸（加速度計+陀螺儀） | 9 軸（加速度計+陀螺儀+磁力計） | 9 軸（加速度計+陀螺儀+磁力計） |
| **內建融合** | 無（需自行寫 Kalman/Madgwick） | 有（ARM Cortex-M0+） | 有（DMP） |
| **磁力計** | 無 | 有 | 有 |
| **精度** | 中等（漂移大） | 高（自動校準） | 高 |
| **介面** | I2C/SPI | I2C/UART | I2C/SPI |
| **易用度** | 需大量軟體處理 | 即插即用，直接輸出歐拉角/四元數 | 中等，DMP 文件不夠完善 |
| **價格（USD）** | ~$2-5 | ~$25-30（Adafruit 板） | ~$10-15 |

**是否需要磁力計？**
- 辦公室環境中磁力計會受到**金屬家具、電腦、鋼筋**干擾，精度下降
- 但可以作為**長期航向修正**的輔助參考
- 實務上，**輪式里程計 + IMU（6 軸）+ LiDAR SLAM** 已經足夠室內導航
- **建議**：使用 BNO055 的 9 軸版本，但軟體上對磁力計資料做加權過濾，不完全依賴

**推薦：**
- **入門版：MPU6050 GY-521 模組**（~$3）— 配合軟體 Kalman filter
- **進階版：Adafruit BNO055 STEMMA QT**（~$30）— 內建融合演算法，省開發時間

### 1.4 輪速編碼器（Wheel Encoder）

用於輪式里程計（Odometry），是 SLAM 的基本輸入。

| 類型 | 霍爾效應編碼器 | 光學編碼器 |
|------|--------------|-----------|
| **原理** | 磁鐵 + 霍爾感測器 | 光柵盤 + 光電感測器 |
| **典型解析度** | 11-64 PPR（搭配齒輪箱可提高） | 100-2000 PPR |
| **優點** | 耐髒污、體積小、價格低 | 解析度高、精度高 |
| **缺點** | 解析度較低 | 怕灰塵、較大 |
| **適用場景** | 搭配減速齒輪馬達（乘以減速比後解析度足夠） | 需要極高精度場景 |

**分辨率需求計算：**
- 假設輪徑 80mm，周長 ≈ 251mm
- 需要 1mm 精度 → 需要 251 PPR 以上
- JGB37-520 馬達內建 11 PPR 霍爾編碼器，搭配 1:30 減速比 → 有效 330 PPR（符合需求）
- 搭配 1:50 減速比 → 有效 550 PPR（更佳）

**推薦產品：**
- **JGB37-520 帶編碼器減速馬達**（~$10-19/個）— 12V、內建 11 PPR 霍爾編碼器、多種減速比可選（1:10 ~ 1:150）
- **Pololu 37D 金屬齒輪馬達附編碼器**（~$25-40/個）— 品質更高、64 CPR 編碼器

**推薦：**
- **入門版：JGB37-520 x 2**（~$20-38）— 含編碼器、成本低
- **進階版：Pololu 37D x 2**（~$60-80）— 更高品質、更好文件支援

### 1.5 跌落/懸崖感測器

防止機器人從樓梯邊緣或高低差跌落。

| 方案 | IR 紅外線反射感測器 | ToF 微型測距（VL53L0X） |
|------|------------------|----------------------|
| **原理** | 紅外線發射/接收對管，偵測地面反射 | 雷射飛行時間測距 |
| **偵測距離** | 2-30cm（可調） | 3-200cm |
| **精度** | 低（只判斷有/無地面） | 高（mm 等級） |
| **抗環境光** | 較弱 | 強 |
| **價格** | ~$1-2/個 | ~$5-8/個 |

**建議安裝：**
- 底盤前方邊緣安裝 **3-4 個**，呈扇形分佈
- 後方安裝 **1-2 個**
- 感測器朝下約 45° 角對準地面
- 當感測器偵測不到地面反射（距離突然變大）→ 觸發急停

**推薦：**
- **入門版：IR 避障模組 x 4**（~$5 總計）
- **進階版：VL53L0X x 4**（~$25 總計）— 更精確、更抗干擾

### 1.6 碰撞感測器（Bumper）

最後一道防線，物理接觸時觸發急停。

| 方案 | 微動開關（Microswitch） | 力感應電阻（FSR） |
|------|----------------------|------------------|
| **原理** | 機械觸點開關 | 壓力改變電阻值 |
| **觸發力** | 固定（~50-200g） | 可偵測力度大小 |
| **壽命** | 10 萬次以上 | 較短 |
| **介面** | GPIO 數位輸入 | ADC 類比輸入 |
| **價格** | ~$0.5-1/個 | ~$5-10/個 |

**安裝方式：**
- 使用彈性保險桿（bumper bar）環繞底盤前半部
- 保險桿連接 2-4 個微動開關
- 碰撞時保險桿內縮觸發微動開關
- 可用 3D 列印保險桿支架

**推薦：**
- **入門版：微動開關 x 4 + 3D 列印保險桿**（~$5 總計）
- **進階版：微動開關 x 6 + FSR x 2**（~$25 總計）— 前方微動，側面 FSR 偵測力道

---

## Part 2：電源系統

### 2.1 功耗分析

#### 各子系統功耗估算

| 子系統 | 電壓 | 待機功耗 | 典型功耗 | 峰值功耗 | 備註 |
|--------|------|---------|---------|---------|------|
| **Mac Mini M4** | 12V DC | ~4W | 12-15W | 65W | 內部原生 12V；典型 0.6A，峰值 >3.7A |
| **Reachy Mini Lite** | 6.8-7.6V | ~3W | ~10W | ~15W | 9 顆 Dynamixel 伺服馬達（XL330/XC330），待機 17mA/顆，負載 ~1.5A/顆 |
| **底盤馬達 x2** | 12V | 0W | ~12W（0.5Ax2） | ~24W（1Ax2） | JGB37-520，空載 ~0.2A，負載 ~0.5-1A |
| **LiDAR** | 5V | - | 1.15W | ~2W | RPLIDAR C1 |
| **超音波 x4** | 5V | - | ~0.4W | ~0.6W | HC-SR04，每個 ~15mA |
| **IMU** | 3.3V | - | 0.05W | 0.1W | BNO055 |
| **ESP32** | 3.3V | 0.01W | 0.5W | 1W | Wi-Fi 啟用時較高 |
| **懸崖感測器 x4** | 5V | - | 0.2W | 0.4W | IR 模組 |
| **DC-DC 轉換損耗** | - | - | ~5W | ~10W | 轉換效率 ~90%，損耗約 10% |

#### 功耗總計

| 場景 | 總功耗 |
|------|--------|
| **待機（靜止不動）** | ~15W |
| **典型運作（導航中）** | ~45W |
| **峰值（全力加速 + AI 推論）** | ~120W |

#### 電池容量需求計算

以 **典型 45W 運作 4 小時**為目標：

```
能量需求 = 45W x 4h = 180Wh
加上 20% 安全餘量 = 216Wh
```

若使用 **24V 系統**：
```
容量 = 216Wh / 24V = 9Ah → 建議 10-15Ah
```

若使用 **12V 系統**：
```
容量 = 216Wh / 12V = 18Ah → 建議 20Ah
```

### 2.2 電池類型比較

| 規格 | 18650 鋰電池組 | LiPo 電池包 | LiFePO4 電池 | 鉛酸電池 |
|------|--------------|------------|-------------|---------|
| **能量密度** | 200-270 Wh/kg | 150-250 Wh/kg | 90-120 Wh/kg | 30-50 Wh/kg |
| **循環壽命** | 500-1000 次 | 300-500 次 | 2000-5000 次 | 200-300 次 |
| **安全性** | 中（需 BMS） | 低（鼓包/起火風險） | 高（最穩定） | 中 |
| **重量（10Ah/24V）** | ~1.2 kg | ~1.0 kg | ~2.5 kg | ~7 kg |
| **自放電** | 低 | 中 | 極低 | 高 |
| **價格（24V 10Ah）** | ~$80-120 | ~$60-100 | ~$150-250 | ~$40-60 |
| **辦公適用性** | 佳 | 有安全疑慮 | 最佳 | 太重 |

#### 電壓方案選擇：12V vs 24V

| 考量 | 12V 系統 | 24V 系統 |
|------|---------|---------|
| **Mac Mini 供電** | 直接供電（原生 12V） | 需 24V→12V 降壓 |
| **馬達效率** | 普通 | 更高效（電流更小，線損低） |
| **電池容量需求** | 20Ah（較大） | 10Ah（較小） |
| **BMS 複雜度** | 3S-4S（簡單） | 6S-7S（中等） |
| **安全性** | 較安全 | 需更小心 |

**推薦方案：24V 系統**
- 24V 電池 → 底盤馬達（24V 版本）
- 24V → DC-DC 降壓至 12V → Mac Mini M4
- 24V → DC-DC 降壓至 7.4V → Reachy Mini Lite
- 24V → DC-DC 降壓至 5V → 感測器、ESP32

#### BMS 需求

- **7S BMS**（7 串鋰離子 = 25.2V 滿電 / 21V 截止）
- 持續放電電流：≥ 10A（典型 45W/24V ≈ 2A，但峰值需預留）
- 功能需求：過充保護、過放保護、過流保護、短路保護、均衡充電
- **推薦：** DALY 7S 20A BMS（~$15-25）或同等品

### 2.3 電源分配架構

```
  ┌─────────────────────────────────────────────────┐
  │                 24V 鋰電池組                      │
  │           7S 10-15Ah + BMS                       │
  │           (21-25.2V)                             │
  └───────┬──────────┬──────────┬──────────┬─────────┘
          │          │          │          │
          ▼          ▼          ▼          ▼
   ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐
   │DC-DC     │ │DC-DC     │ │DC-DC     │ │馬達驅動板│
   │24V→12V   │ │24V→7.4V  │ │24V→5V    │ │(直接24V) │
   │5A        │ │3A        │ │5A        │ │L298N/BTS │
   └────┬─────┘ └────┬─────┘ └────┬─────┘ └────┬─────┘
        │            │            │            │
        ▼            ▼            ▼            ▼
   Mac Mini M4  Reachy Mini   ESP32        底盤馬達
   (12V/直接    Lite          LiDAR        x2
    接內部)     (7.4V)        超音波
                              IMU
                              懸崖感測器
```

#### Mac Mini M4 供電方案詳解

**Mac Mini M4 內部原生電壓為 12V DC**。有三種供電方式：

**方案 A：內部直接供 12V（推薦）**
- 拆除 Mac Mini 內部 AC 電源模組
- 直接從外部 DC-DC 12V 輸出接到內部 12V 電源接點
- 優點：最高效率、無損耗
- 缺點：需要改裝、失去保固
- 典型電流：0.6A，峰值 3.7A
- 來源：[Hackbook M4 Mini 專案](https://github.com/vk2diy/hackbook-m4-mini)

**方案 B：USB-C PD 供電（需改裝）**
- 在 Mac Mini 內部安裝 USB-C PD 解碼板，輸出 12V 給主機板
- 外部使用 USB-C PD 電源供應器或觸發板
- 優點：接口標準化
- 缺點：改裝困難度高
- 來源：[AppleInsider USB-C hack 報導](https://appleinsider.com/articles/25/05/04/its-tough-but-you-can-hack-a-m4-mac-mini-to-get-power-over-usb-c)

**方案 C：DC-AC 逆變器（不推薦）**
- 24V DC → 110V AC 逆變器 → Mac Mini 原廠電源
- 優點：無需改裝
- 缺點：轉換效率低（~80%）、浪費能源、體積大

**強烈推薦方案 A**，因為 Mac Mini M4 典型功耗僅 12-15W（0.6-1.2A@12V），改裝後可從 24V→12V DC-DC 直接供電。

#### 馬達電源隔離

- 馬達與邏輯電路**必須隔離**，防止馬達啟停時的電壓突波影響電腦和感測器
- 方法：
  - 使用**獨立的 DC-DC 模組**供電給馬達驅動板
  - 在馬達電源線加裝**大電容**（470uF-1000uF）穩壓
  - 馬達驅動板與邏輯板**共地但不共電源**
  - 可選用 **LC 濾波器** 進一步抑制雜訊

### 2.4 充電方案

#### 方案 A：手動插充（入門版）

- 使用標準鋰電池充電器（24V/2A-5A）
- 底盤加裝 DC 充電插座（XT60 或 DC barrel jack）
- **優點**：簡單、便宜
- **缺點**：需要人工介入
- **充電時間**：10Ah / 3A = ~3.5 小時
- **成本**：充電器 ~$20-30

#### 方案 B：自動充電座（進階版）

**充電座設計概念：**

```
  機器人底部                    充電座
  ┌───────────┐               ┌───────────┐
  │  ○    ○   │ ← Pogo Pin → │  ⊕    ⊕   │
  │  (-)  (+) │   接觸面      │  (-)  (+) │
  └───────────┘               └───────────┘
       ↑                           ↑
  金屬接觸片                   彈簧針 Pogo Pin
  (嵌入底盤)                   (固定在底座)
```

**關鍵元件：**
- **Pogo Pin**（彈簧針）：2-4 針（正極、負極、信號、備用）
- **對位方式**：V 型導引槽 + 磁鐵輔助對位
- **偵測方式**：充電座上 IR 信標（機器人靠近時對準）
- **充電電路**：充電座提供恆壓恆流（CC/CV），BMS 在機器人端管理

**充電座零件清單：**
- Pogo Pin 連接器（2-4pin）：~$5-10
- 24V/3A 開關電源：~$15-20
- 3D 列印座體 + V 型導引：~$5
- IR LED 信標模組：~$3-5
- 繼電器/MOSFET 安全開關：~$3
- **小計：~$30-45**

---

## Part 3：BOM 清單與價格估算

### 入門版（最低成本可運行）

| 類別 | 元件 | 數量 | 單價 (USD) | 小計 (USD) |
|------|------|------|-----------|-----------|
| **LiDAR** | RPLIDAR C1 | 1 | $65 | $65 |
| **超音波** | HC-SR04 | 4 | $2 | $8 |
| **IMU** | MPU6050 GY-521 模組 | 1 | $3 | $3 |
| **馬達+編碼器** | JGB37-520 12V 帶編碼器 | 2 | $15 | $30 |
| **懸崖感測器** | IR 避障模組 | 4 | $1.5 | $6 |
| **碰撞感測器** | 微動開關 + 保險桿 | 4 | $1 | $4 |
| **MCU** | ESP32 開發板 | 1 | $8 | $8 |
| **馬達驅動** | L298N 驅動板 | 1 | $5 | $5 |
| **電池** | 24V 10Ah 18650 鋰電池組 (含 BMS) | 1 | $110 | $110 |
| **DC-DC 12V** | 24V→12V/5A 降壓模組 | 1 | $8 | $8 |
| **DC-DC 7.4V** | 24V→7.4V/3A 降壓模組 | 1 | $8 | $8 |
| **DC-DC 5V** | 24V→5V/5A 降壓模組 | 1 | $6 | $6 |
| **充電器** | 24V/3A 鋰電池充電器 | 1 | $25 | $25 |
| **濾波電容** | 470uF/25V 電解電容 | 4 | $0.5 | $2 |
| **線材/接頭** | XT60、杜邦線、端子等 | 1批 | $15 | $15 |
| | | | **總計** | **~$303** |

### 進階版（完整功能）

| 類別 | 元件 | 數量 | 單價 (USD) | 小計 (USD) |
|------|------|------|-----------|-----------|
| **LiDAR** | RPLIDAR A2 (M12) | 1 | $229 | $229 |
| **超音波** | MaxBotix MB1240 (前/側) | 4 | $35 | $140 |
| **超音波** | HC-SR04 (後方) | 2 | $2 | $4 |
| **IMU** | Adafruit BNO055 STEMMA QT | 1 | $30 | $30 |
| **馬達+編碼器** | Pololu 37D 金屬齒輪馬達+編碼器 | 2 | $35 | $70 |
| **懸崖感測器** | VL53L0X ToF 模組 | 4 | $6 | $24 |
| **碰撞感測器** | 微動開關 x 6 + FSR x 2 | 8 | $3 | $24 |
| **MCU** | ESP32-S3 開發板 | 1 | $12 | $12 |
| **馬達驅動** | BTS7960 雙 H 橋驅動 | 1 | $12 | $12 |
| **電池** | 24V 15Ah LiFePO4 (含 BMS) | 1 | $250 | $250 |
| **DC-DC 12V** | 24V→12V/10A 降壓模組（高品質） | 1 | $18 | $18 |
| **DC-DC 7.4V** | 24V→7.4V/5A 降壓模組 | 1 | $12 | $12 |
| **DC-DC 5V** | 24V→5V/5A 降壓模組 | 1 | $10 | $10 |
| **充電座** | Pogo Pin + 電源 + 導引（自製） | 1 | $45 | $45 |
| **充電器** | 24V/5A 鋰電池充電器 | 1 | $35 | $35 |
| **電壓監測** | INA219 電流/電壓監測模組 | 2 | $5 | $10 |
| **濾波電容** | 1000uF/50V + LC 濾波 | 1批 | $5 | $5 |
| **配電板** | 自製 PCB 電源分配板 | 1 | $20 | $20 |
| **線材/接頭** | XT60、Anderson、端子等 | 1批 | $25 | $25 |
| | | | **總計** | **~$975** |

---

## Part 4：總結與建議

### 入門版 vs 進階版對比

| 項目 | 入門版 (~$303) | 進階版 (~$975) |
|------|--------------|--------------|
| 導航精度 | 中等，可用 | 高，穩定可靠 |
| 避障能力 | 基本 | 全方位多層 |
| 電池續航 | ~4 小時 | ~5-6 小時（LiFePO4 更耐用） |
| 充電方式 | 手動插充 | 自動充電座 |
| 開發難度 | 中（需寫 Kalman 等） | 低（BNO055 即插即用） |
| 維護成本 | 低 | 中 |

### 建議開發路線

1. **第一階段**：先用入門版元件搭建，驗證基本導航和避障功能
2. **第二階段**：逐步升級 IMU（BNO055）和超音波（MaxBotix）
3. **第三階段**：建構自動充電座
4. **第四階段**：升級 LiDAR（如需更大範圍或更高精度）

### 關鍵風險與注意事項

1. **Mac Mini 改裝風險**：拆機接 12V 直供會失去保固，建議先用舊機練習
2. **LiPo 安全**：辦公室環境建議使用 LiFePO4 而非 LiPo，安全性更高
3. **EMI 干擾**：馬達啟停會產生電磁干擾，務必做好電源隔離和濾波
4. **散熱**：Mac Mini 在密閉底盤內需注意散熱，建議開通風口或加小風扇
5. **軟體整合**：ESP32（底層控制）與 Mac Mini（ROS/SLAM）之間建議用 USB Serial 或 Wi-Fi 通訊

---

## 參考來源

- [SLAMTEC RPLIDAR C1 官方頁面](https://www.slamtec.com/en/C1)
- [DFRobot RPLIDAR 產品線](https://www.dfrobot.com/category-313.html)
- [YDLIDAR 官方網站](https://www.ydlidar.com/)
- [Hackbook M4 Mini — Mac Mini 12V 改裝](https://github.com/vk2diy/hackbook-m4-mini)
- [AppleInsider — Mac Mini USB-C 供電](https://appleinsider.com/articles/25/05/04/its-tough-but-you-can-hack-a-m4-mac-mini-to-get-power-over-usb-c)
- [Reachy Mini Lite 硬體規格](https://huggingface.co/docs/reachy_mini/en/platforms/reachy_mini_lite/hardware)
- [Dynamixel XL330-M288 規格](https://emanual.robotis.com/docs/en/dxl/x/xl330-m288/)
- [Adafruit BNO055 IMU](https://www.adafruit.com/product/4646)
- [MaxBotix MB1240 超音波感測器](https://maxbotix.com/products/mb1240)
- [Bioenno Power LiFePO4 電池](https://www.bioennopower.com/collections/24v-lifepo4-batteries)
